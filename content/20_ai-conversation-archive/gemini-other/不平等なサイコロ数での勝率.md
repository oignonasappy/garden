---
tags:
  - gemini
  - math
---

> [!quote]+ Prompt
> プレイヤーAとBがサイコロの出目の合計を競う。  
> しかし、2人の持つサイコロの数は一定でない。  
> 2人が持つサイコロの数から、  
> - プレイヤーAが勝つ(プレイヤーBの合計より高い)
> - プレイヤーAが勝つ(プレイヤーBの合計以上)
> - 引き分けになる
> 確率を式で表すと？
> 
> 例えば、プレイヤーAはサイコロを2つ、プレイヤーBはサイコロを6つ持っている。上記3つの確率はどうなる？

サイコロの出目の合計を競う確率の問題、すごく面白いね！これは、**確率分布の重ね合わせ（畳み込み）**を考える問題だ。

### 確率を求める式

プレイヤーAが $n_A$ 個のサイコロを、プレイヤーBが $n_B$ 個のサイコロを持つと仮定しよう。それぞれの合計値を $S_A$ と $S_B$ とし、$S_A$ が $i$ になる確率を $P(S_A=i)$、 $S_B$ が $j$ になる確率を $P(S_B=j)$ と表すと、各確率は以下の式で表せるよ。

**1. プレイヤーAが勝つ ($S_A > S_B$) 確率**

これは、プレイヤーAの合計値が、プレイヤーBの合計値よりも大きいすべての組み合わせの確率を足し合わせることで求められる。

$$P(S_A > S_B) = \sum_{i=n_A}^{6n_A} P(S_A=i) \sum_{j=n_B}^{i-1} P(S_B=j)$$

---

**2. プレイヤーAが勝つ（$S_A \ge S_B$）確率**

これは、プレイヤーAが勝つ確率に、引き分けの確率を加えることで求められる。

$$P(S_A \ge S_B) = P(S_A > S_B) + P(S_A = S_B)$$

---

**3. 引き分けになる ($S_A = S_B$) 確率**

これは、プレイヤーAとBの合計値が同じになるすべての組み合わせの確率を足し合わせることで求められる。

$$P(S_A = S_B) = \sum_{k=\max(n_A, n_B)}^{\min(6n_A, 6n_B)} P(S_A=k) \cdot P(S_B=k)$$

ここで、$P(S_A=k)$ と $P(S_B=k)$ は、それぞれ $n_A$ 個と $n_B$ 個のサイコロの合計が $k$ になる確率だ。これらの確率は、サイコロの数が増えるにつれて正規分布に近づく性質があるよ。

### 具体的なケース：Aは2個、Bは6個

プレイヤーAが2個、プレイヤーBが6個のサイコロを持つ場合、それぞれの合計値の平均は、Aが7、Bが21になるため、直感的に考えても、Bが勝つ確率が圧倒的に高いことがわかるね。

プログラムで計算すると、各確率は以下のようになるよ。

- **プレイヤーAが勝つ（$S_A > S_B$）確率**: **約 0.0051%**
    
- **プレイヤーAが勝つ（$S_A \ge S_B$）確率**: **約 0.0053%**
    
- **引き分けになる ($S_A = S_B$) 確率**: **約 0.0002%**
    

見ての通り、サイコロの数が2個対6個という圧倒的な差があるため、プレイヤーAが勝つ確率は非常に低いんだ。これは、サイコロの数が増えるほど合計値が平均値（$3.5 \times \text{サイコロの数}$）に収束していくため、Bの合計値がAの合計値を下回ることはほとんどないからだよ。

プログラミングでシミュレーションしてみるのも面白いかもしれないね！