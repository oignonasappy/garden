---
tags:
  - gemini
  - infrastructure
  - security
---

> [!quote]+ Prompt
> HTTPと比較して、HTTPsに必要なことの全てってなんだ？

HTTPと比較して、**HTTPS**に必要なことは、主に**セキュリティと認証**に関わる追加の層、具体的には**SSL/TLSプロトコル**を実装することなんだ。🚀

HTTPSを機能させるために、HTTPにはない**必須の要素**は以下の通りだよ。

---

## 🔑 HTTPSに必要なことの全て

### 1. 必須のプロトコル層

HTTPSは、HTTPとTCP/IPの間に**SSL/TLS（Secure Sockets Layer / Transport Layer Security）**という暗号化レイヤーを挟んだ通信プロトコルなんだ。

- **SSL/TLSプロトコル**: これがHTTPSの核心であり、データ暗号化と認証の仕組みを提供する。HTTPリクエスト・レスポンスは、この層で暗号化されてからネットワークに送られるよ。
    

---

### 2. 必須のサーバー側要素

HTTPS接続を確立し、ブラウザに「このサーバーは本物だ」と信頼してもらうために、サーバー側には以下のものが**必須**となる。

- **デジタル証明書 (SSL/TLS Certificate)**:
    
    - **役割**: サーバーの公開鍵を含み、サーバーの身元情報（ドメイン名など）を保証する。
        
    - **発行元**: 認証局（CA: Certificate Authority）という信頼された第三者機関によって発行される必要がある（例：Let's Encrypt, DigiCertなど）。
        
- **秘密鍵 (Private Key)**:
    
    - **役割**: 証明書とペアになる鍵で、サーバーに厳重に保管される。この鍵を使って、クライアント（ブラウザ）と共有する**共通鍵**の交換プロセス（ハンドシェイク）と、データの復号化を行うんだ。
        
- **専用のポート**:
    
    - **HTTP**: デフォルトはポート**80**。
        
    - **HTTPS**: デフォルトはポート**443**。Webサーバー（ApacheやNGINXなど）はこのポートでSSL/TLS接続を待ち受ける設定が必要だね。
        

---

### 3. 必須の接続確立プロセス

クライアントとサーバーがHTTPS接続を確立するために、HTTPにはない**「TLSハンドシェイク」**という複雑な手順が必須となるよ。

- **TLSハンドシェイク**:
    
    - **認証**: クライアントがサーバーのデジタル証明書を受け取り、**信頼されたCAによって署名されているか**を確認し、サーバーの身元を検証する。
        
    - **鍵交換**: クライアントとサーバーが、公開鍵暗号方式を使って安全に**共通のセッション鍵**を作成・交換する。
        
    - **暗号化通信の開始**: このセッション鍵を使って、以降のHTTPデータ（リクエストとレスポンス）を**暗号化**してやり取りする。
        

要するに、HTTPは「情報のやり取り」が目的だけど、HTTPSはそれに加えて**「情報の秘密性と、通信相手の真正性の保証」**を目的としているため、SSL/TLSと証明書が必須となるんだね！👍