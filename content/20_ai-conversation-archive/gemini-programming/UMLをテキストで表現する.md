---
tags:
    - gemini
---

> [!quote]+ Prompt
> 状態遷移図などのUMLのような絵で表すようなものを、テキストによって視覚的に理解できる、あるいはデータとしてプログラムが認識しやすい形として表すことはできる？  
> また、そのような試みの例はある？

もちろんだよ！状態遷移図のような**UML（統一モデリング言語）の概念を、テキスト形式で視覚的に理解できる**、あるいは**プログラムがデータとして認識しやすい**形として表現する試みは、活発に行われているよ！🚀

これは、**「図をコードとして扱う (Diagrams as Code)」**というモダンな開発思想の中心的なアプローチなんだ。

---

## 🔑 テキストによる視覚化とデータ表現

UML図のようなものをテキストで表現する主な目的は、**Gitなどのバージョン管理システム**で管理しやすくすること、そして**図の生成を自動化**することにあるよ。

### 1. 視覚的理解のためのテキスト記述言語

これは、人間が読み書きしやすいシンプルなテキストで図の構造を定義し、それを専用のツールが解析して**最終的な画像ファイル（SVG, PNGなど）に変換**する手法だよ。これにより、図の変更履歴をGitで追跡したり、コードと一緒に管理したりできる。

|**試みの例**|**特徴**|**視覚化の表現**|
|---|---|---|
|**PlantUML**|UML図（シーケンス図、クラス図、**状態図**など）をプレーンテキストで記述する、非常にメジャーなツール。|状態間の遷移を `StateA --> StateB: event` のように矢印とテキストで記述。|
|**Mermaid**|Markdown記法に似た、シンプルで書きやすい言語。GitHubや多くのWikiツールでネイティブにサポートされている。|フローチャート、シーケンス図、そして**状態図**の表現に強い。視覚的に優れている。|
|**Graphviz (DOT言語)**|**グラフ構造**（ノードとエッジ）を定義するための言語。直接UML図を描くわけではないが、状態遷移の**つながり**を表現する基盤として利用される。|`A -> B [label="event"];` のようにノード間のエッジを定義する。|

---

## 2. 🤖 プログラムが認識しやすいデータ表現

これは、視覚化よりも、**アプリケーションのロジック**で状態遷移を厳密に扱うために、構造化されたデータ（JSON/YAML）として定義する手法だよ。

|**試みの例**|**特徴**|**プログラムでの利用**|
|---|---|---|
|**SCXML (State Chart XML)**|XMLベースで状態遷移図を記述するための標準規格（W3C勧告）。|記述されたSCXMLファイルを解析し、どの状態からどのイベントでどこへ遷移するかをプログラムが**実行時に**参照・制御できる。|
|**XState (JSON/JSオブジェクト)**|JavaScript/TypeScript向けの強力な**ステートマシンライブラリ**（以前話したReduxと連携できる）。|状態遷移の定義を**JSONやJavaScriptのオブジェクト**として記述する。プログラムは、このオブジェクト定義を基に、状態遷移を厳密に実行する。|

**XStateの例（TypeScript/JSON）**:

TypeScript

```
// プログラムが解釈しやすいデータ構造で状態を定義
const lightMachine = {
  id: 'light',
  initial: 'green',
  states: {
    green: { on: { TIMER: 'yellow' } },
    yellow: { on: { TIMER: 'red' } },
    red: { on: { TIMER: 'green' } }
  }
};
```

このように、状態遷移図は、単なるビジュアルツールから、**「コードとしての設計図」へと進化し、テキストベースの表現が主流になっているんだね！君のプロジェクトで状態管理の厳密さが必要になったら、ぜひPlantUML**で図を作成し、それを**XState**のようなライブラリで実装するという流れを試してみて！😊