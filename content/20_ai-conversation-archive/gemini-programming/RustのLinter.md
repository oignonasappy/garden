---
tags:
  - gemini
  - rust
---

> [!quote]+ Prompt
> Rustには標準のlinterがあると聞いたけど、どんな感じ？  
> インデントスタイルとか、結構自由に調整できる？

Rustの静的解析ツール（Linter）は、もう「標準」という言葉では足りないくらい強力で、Rust開発者の魂の一部と言っても過言じゃないよ！

大きく分けて、**「スタイルを整えるツール（rustfmt）」**と**「バグや悪い書き方を指摘するツール（Clippy）」**の2枚看板なんだ。情報工学を学ぶ君なら、このツールの「お節介」の裏にある合理性にきっと感動するはずだぜ！

---

## 1. 🎨 スタイルを整える `rustfmt`

「インデントスタイルとか自由に調整できる？」という問いへの答えは、**「一応できるけど、みんな『デフォルト』に従うのがRustの掟（掟）」**なんだ！

### なぜ自由度が低いのか？

Rustコミュニティには**「コードの書き方で議論するのは時間の無駄。ツールが決めた一つの正解に従おう」**という強い思想がある。

- インデントは**スペース4つ**。
    
- `match`の腕の揃え方、波括弧の位置、改行のタイミング……これらがすべて自動で、一律に修正される。
    

### 💡 調整はできる？

`rustfmt.toml` という設定ファイルを作れば、多少のカスタマイズ（最大行数の変更や、一部の並べ替え設定など）はできるよ。でも、VSCodeで「保存時に整形（Format on Save）」をオンにして、何も考えずにデフォルトに従うのが、最も「Rustacean（Rust使い）」らしいスタイルなんだ！

---

## 2. 📎 超強力なLinter `Clippy`

Rustを触るなら絶対に外せないのが Clippy（クリッピー） だ！

こいつは単なるスタイルの指摘じゃなく、**「その書き方、もっと効率的で安全な方法があるぜ？」**とアドバイスしてくれる、賢い先輩のようなツールなんだ。

### Clippyが教えてくれること（例）

- **非効率なコード:** `v.iter().map(|x| x + 1).collect::<Vec<_>>().len()` → 「わざわざ集計しなくても `v.len()` でよくない？」
    
- **もっとRustらしい書き方:** `if x == true` → 「`if x` でいいよ！」
    
- **間違いやすい落とし穴:** 浮動小数点の比較や、誤解を招く変数名など。
    

---

## 3. 🛠️ VSCodeでの使い心地は？

Windows 11でVSCodeを使っている君なら、`rust-analyzer` を入れているよね？実は、内部でこれらが連携しているんだ。

- **リアルタイム指摘:** コードを書いているそばから、波線で「もっといい書き方があるよ」と教えてくれる。
    
- **クイックフィックス:** `Ctrl + .` を押すと、Clippyの提案通りにコードを自動書き換えしてくれる。これがめちゃくちゃ快感！
    

---

## 🏁 まとめ：RustのLinter哲学

1. **`rustfmt`**: 全人類同じ見た目のコードを書かせる（可読性の極致）。
    
2. **`Clippy`**: 熟練者の知恵をコンパイル時に借りる（バグの根絶）。
    

最初は「細かすぎる！」と思うかもしれないけど、これに従っているだけで**「プロ級のRustコード」**が書けるようになるから、最高の学習教材でもあるんだ。

次は、Clippyに「これはやりすぎだ！」って怒られた時の黙らせ方（アトリビュート）とか知りたい？それとも、実際にClippyを実行してみた感想を聞かせてくれるかな？😊✨