---
tags:
  - gemini
  - javascript
  - html
---

> [!quote]+ Prompt
> markdownテキストをできるだけ動的にHTMLに表示できるjavascriptライブラリはある？  
> テキストボックスがあって、そこに入力されたmarkdownをリアルタイムにプレビューしたい

まさに求めている機能を実現できる、**Markdownテキストを動的にHTMLに変換・表示するJavaScriptライブラリ**はたくさんあるよ！🚀

リアルタイムプレビューを実現するためには、変換処理が速く、ブラウザでの動作が安定しているものが重要だね。最も人気があり、**軽量で高速**、そして**カスタマイズ性に優れている**ライブラリを2つ紹介するよ！

---

## 💻 1. marked.js

**`marked.js`** は、最も古くから存在し、広く使われているMarkdownパーサーの一つだよ。

- **特徴**: **高速性**と**シンプルさ**が最大の魅力。変換処理が速いため、リアルタイムプレビューのような動的な用途に非常に適しているんだ。
    
- **使い方**:
    
    1. テキストエリアの内容（Markdownテキスト）を取得する。
        
    2. `marked.parse(markdownText)` 関数に渡す。
        
    3. 返ってきたHTML文字列を、プレビュー領域のDOM要素の `innerHTML` に設定する。
        
- **動的な利用**: テキストボックスの `input` イベントや `keyup` イベントが発生するたびに、この変換処理を実行すれば、**ミリ秒単位でプレビューを更新**できるよ。
    
- **カスタマイズ**: セキュリティのためのサニタイズ（HTMLタグの無効化）や、特定のMarkdown要素（リンク、コードブロックなど）のレンダリング方法を細かく制御できる**カスタムレンダラー**機能も持っているよ。
    

---

## 🛠️ 2. remarkable

**`remarkable`** も、`marked.js` と並んで人気のある高速なMarkdownパーサーだよ。

- **特徴**: **拡張性**と**正しい仕様への準拠**に優れている。特にMarkdownの仕様が複雑な部分（リスト、テーブルなど）の処理が堅牢だよ。
    
- **使い方**: `marked.js` と同様に、Markdownテキストをパーサーに渡すだけでHTMLが返ってくる。
    
- **拡張性**: プラグインによる機能追加が容易で、標準のMarkdown仕様にはない独自記法（絵文字、脚注など）に対応させたい場合に特に便利だよ。
    

---

## 💡 リアルタイムプレビュー実装のヒント

君が言っていた「テキストボックスに入力されたMarkdownをリアルタイムにプレビューする」という機能は、JavaScriptでは以下のような構造で実装するのがベストだよ。

### 1. イベントリスナーの設定

テキストエリアのDOM要素に対して、**`input`イベントリスナー**を設定する。`input`イベントは、ユーザーがキーを押したり、ペーストしたり、値を変更するたびに発生するから、リアルタイム性を確保できるよ。

### 2. スロットリング/デバウンス (Throttling / Debounce)

プログラミングのパフォーマンスを突き詰めるなら、この概念は重要だよ！

- ユーザーが文章を速く入力している間、**毎キー**変換処理（CPU負荷が高い）を実行し続けると、ブラウザが重くなる可能性がある。
    
- そこで、**デバウンス**処理を導入し、「ユーザーが**入力を終えてから一定時間（例：300ミリ秒）キー入力がない場合**にのみ、変換処理を実行する」ようにすると、パフォーマンスが格段に向上するよ！
    

君はプログラミングに深い知見があるから、この**デバウンス**処理を`marked.js`などの変換処理と組み合わせることで、**高速かつ安定した最高のリアルタイムプレビュー**が実現できるはずだ！楽しんで実装してみてね！😊

> [!question] 所感
> プレビューではなく、Markdownそのものを動的に編集するなら、tiptapもあるかな？
