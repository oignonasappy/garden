---
tags:
  - gemini
  - uml
---

> [!quote]+ Prompt
> ユースケース図を描くときに、  
> アクターはただ一人で、示されているユースケースをそのアクターがすべて利用可能な時は、  
> アクターとユースケース間に関連をわざわざ引く必要性を感じないんだけど、これは省略できる？  
> そもそも関連はどのぐらいの粒度で表すべき？

---

なるほど！ユースケース図におけるアクターとユースケースの関連（線）について、君の疑問、すごくよくわかるよ！「一人しかアクターがいないのに、全部線で繋ぐのって面倒だし、図がゴチャゴチャするだけじゃない？」って思うのは、まさに多くの人が感じる疑問点なんだ。

情報工学を学ぶ君が、図の**「表現の効率性」と「情報伝達の明確さ」**のバランスを追求しているのは、すごく良い視点だよ！

---

### アクターとユースケース間の関連、省略できる？

結論から言うと、**「推奨されるUMLの作法としては、基本的に省略しない方が良い」**けど、**「現実的には、図の目的や対象読者、複雑度に応じて判断されることもある」**といった感じだよ。

#### UMLの標準的な作法としては…

UML（統一モデリング言語）のユースケース図の規約では、アクターとユースケースの間には**「関連（Association）」**という線を引くことになっているんだ。これは、**「アクターがそのユースケースと相互作用する（利用する）」**ことを明示的に示すためのものなんだ。

- **なぜ省略しない方が良いとされるのか:**
    
    - **明確性の担保:** 誰が見ても、どのアクターがどのユースケースにアクセスできるのかが一目瞭然になる。
        
    - **曖昧さの排除:** 「このアクターはここに繋がってないけど、暗黙的に使えるの？」というような疑問が生じるのを防ぐ。
        
    - **将来の拡張性:** 今はアクターが一人でも、将来的に別の種類のアクター（管理者、ゲストなど）が追加されたときに、それぞれの関連を明確に区別できるようになる。
        

#### しかし、現実的な運用では…

君が感じるように、アクターが一人でユースケースの数が非常に多い場合、すべての関連を引くと、確かに図は**スパゲッティ状態**になることがあるよね。そんな時は、以下のような対応が取られることもあるよ。

1. 「ログイン」などの共通ユースケースは記述で補う:
    
    以前話したように、「ログインする」のような、ほとんどのユースケースの前提となるものは、ユースケース図には描かず、個々のユースケースの「事前条件」としてドキュメント（ユースケース記述）に記載することが多い。
    
2. パッケージングでグルーピングする:
    
    関連するユースケースを「パッケージ」で囲んでグループ化し、そのパッケージ全体とアクターを関連付ける、といった描き方をするケースもある。ただし、これもアクターと個々のユースケースの間の関連を完全に省略するわけではない。
    
3. 図の目的を明確にする:
    
    もし、そのユースケース図の目的が、システム全体の機能の一覧を大まかに示すことにあり、個々のアクターとユースケースの関係の厳密な記述が主ではない場合、敢えて全ての関連を描かないという選択をする場合も、なくはない。ただし、これは非常に限定的な状況で、図を見た人が混乱しないような工夫（凡例や説明）が必要になるよ。
    

---

### 関連（線）はどのぐらいの粒度で表すべき？

これも重要なポイントだね！

- 基本は「直接的な相互作用がある」ユースケース間:
    
    アクターとユースケース間の関連は、「そのアクターがそのユースケースの機能を開始したり、そのユースケースのプロセスに直接関与したりする」場合に引くのが基本だよ。
    
- **`<<include>>` と `<<extend>>` の使い分け**:
    
    - **`<<include>>`**: あるユースケースが、別の**必須のユースケース**の機能を利用する場合（例: 「商品をカートに入れる」が「在庫を確認する」をインクルード）。
        
    - <<extend>>: あるユースケースが、特定の条件下でオプションのユースケースを利用する場合（例: 「注文を確定する」が「クーポンを適用する」をエクステンド）。
        
        これらの関連は、ユースケースとユースケースの間に引くもので、システムの機能の構造を示すために非常に重要だよ。これらは省略すべきではない。
        
- 粒度と抽象度:
    
    ユースケース図は、システムの外部からの振る舞いを示すもので、システムの詳細な内部処理を示すものではないんだ。だから、関連も、システムの「外部から見た機能」のレベルで表現するのが適切だよ。あまりに細かすぎる内部処理をユースケースとして表現し、関連を引きまくると、それはもはやユースケース図ではなくなってしまうね。
    

---

### まとめ

- **アクターとユースケースの関連は、UML的には基本的に省略しない方が良い。**
    
- ただし、図が極度に複雑になる場合は、**「ログイン」のように暗黙的な前提となるものはユースケース記述で補う**など、工夫を検討する余地はある。
    
- **関連の粒度は、あくまで「システムの外部から見た機能とアクターの相互作用」**に焦点を当て、必要に応じて `<<include>>` や `<<extend>>` でユースケース間の関係を示すのがベストだよ。
    

君が感じた疑問は、まさに「UMLモデリングのベストプラクティス」と「現実のドキュメント作成におけるバランス」の狭間にある、とても良い問いだったね！