---
tags:
    - gemini
---

> [!quote]+ Prompt
> "something went wrong"はどんな時に表示すべき？

おお、「**something went wrong**」の表示タイミングだね！これはUI/UX設計とエラーハンドリングの**哲学**に関わる、とても良いトピックだよ！💡

「何か問題が発生しました」というメッセージは、ユーザーに「技術的な問題が起きたけど、あなたのせいじゃないよ」と伝えるための**最終手段**であり、乱用すべきではないんだ。

情報工学を学ぶ君には、エラーを**「ユーザーが解決できるもの」**と**「システム側でしか解決できないもの」**に分けて考えることをオススメするよ！

---

## 🧐 「something went wrong」を表示すべきタイミング

このメッセージを表示すべきは、**システムが予期せぬ、かつユーザーが対処しようのないエラーに遭遇したとき**に限定すべきだよ。

### 1. 予期せぬ致命的なエラー（システムエラー）

コードが意図していない状態に陥り、アプリケーションの**動作継続が不可能**になった場合。

- **バックエンドAPIの500番台エラー**: サーバー側で例外（ヌルポインター参照、DB接続断など）が発生し、処理が中断した場合。
    
    - _ユーザーは何もできない。_
        
- **クライアント側での致命的なランタイムエラー**: JavaScriptのコードのバグ（例：未定義のプロパティにアクセス）で、特定の機能全体が動かなくなった場合。
    
    - _ユーザーはコードを直せない。_
        
- **サードパーティサービスの接続失敗**: 決済APIや認証サービスなど、外部の重要なサービスとの通信がタイムアウトしたり、認証に失敗したりした場合。
    

### 2. 予期しないセキュリティ/ネットワークエラー

リクエストがネットワーク層でブロックされたり、ブラウザ側でセキュリティ違反と見なされたりした場合。

- **CORSポリシー違反**: (さっき話したね！) サーバーが許可していないオリジンからのリクエストをブラウザがブロックし、JSにレスポンスが渡されなかった場合。
    
- **ネットワークの切断**: ユーザーの接続が突然切れ、リトライしても解決しない場合。
    

---

## 🚫 「something went wrong」を**避けるべき**タイミング

ユーザーが**行動を変えれば解決できる**エラーや、**より具体的で役立つ**メッセージが出せる場合は、この一般的なメッセージは避けるべきだよ。

|**避けるべきエラーのカテゴリ**|**具体的メッセージの例**|**理由**|
|---|---|---|
|**ユーザー入力エラー**|「メールアドレスの形式が正しくありません」 「パスワードは8文字以上が必要です」|ユーザーが**自分の行動**（入力内容）を変えれば解決できるから。|
|**認証・認可エラー**|「ログイン情報が間違っています」 「この操作を行う権限がありません (403 Forbidden)」|エラーの原因が明確で、ユーザーに**次のアクション**を示せるから。|
|**リソースが見つからない**|「ページが見つかりません (404 Not Found)」 「この商品は削除されました」|**何が**見つからないのかが具体的で、ユーザーは戻るなどの操作ができるから。|
|**APIのレスポンス不足**|「データが空です」 「まだ投稿がありません」|**予期された状態**であり、エラーではない。情報がないことを伝えるべき。|

---

## ✍️ 最高の「something went wrong」を設計する

メッセージは単に「エラーです」と伝えるだけでなく、**ユーザーの不安を取り除く**ことが大事だよ。

1. **謙虚に謝罪**: 「ご迷惑をおかけして申し訳ありません。」
    
2. **状況説明**: 「予期せぬエラーが発生しました。しばらくしてからお試しください。」
    
3. **情報提供**: （開発者向けではない）エラーIDやリファレンスコードを添える。「エラーコード：`ABC-123`」
    
4. **次のステップ**: 問い合わせ先や、トップページに戻るボタンを提供する。
    

これがプロのエンジニアのエラーハンドリングだよ。単なるエラーメッセージではなく、**ユーザーとのコミュニケーション**として捉えるのが楽しいよね！😊