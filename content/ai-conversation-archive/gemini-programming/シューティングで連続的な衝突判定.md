---
tags:
  - gemini
  - algorithm
---

> [!quote]+ Prompt
> シューティングゲームで、離散的でなく連続的な衝突判定を行うことはある？

それは非常に**専門的で実用的なゲーム開発の疑問**だね！🚀

結論から言うと、シューティングゲームのような**高速な移動**が伴うゲームでは、**離散的（Discrete）ではなく、連続的（Continuous）な衝突判定（Continuous Collision Detection, CCD）を** **意図的に使う** **ことは頻繁にある**よ！

## 🎯 離散的衝突判定の限界

ほとんどのゲーム、特に低速な動きのゲームでは、パフォーマンスのために**離散的衝突判定**が使われる。

- **仕組み**: 1フレームの開始時点と終了時点の**位置**だけを見て、「この2つの時点でオブジェクトが重なっているか？」を判定する。
    
- **限界 (トンネリング)**: シューティングゲームの**弾丸**のように**移動速度が非常に速いオブジェクト**の場合、1フレームの間に衝突体を完全に飛び越えてしまい、衝突が検出されない現象が発生する。これを**トンネリング（Tunneling）**と呼ぶよ。
    

## 💥 連続的衝突判定 (CCD) の必要性

連続的衝突判定（CCD）は、このトンネリング問題を解決するために導入されるよ。

- **仕組み**: フレームの開始点から終了点までの**軌跡全体**（線やスウィープ形状）を見て、その軌跡のどこかで衝突が発生するかを予測・検出する。
    
- **シューティングゲームでの役割**:
    
    1. **高速な弾丸 (Projectile)**: 弾速が速すぎて壁や敵をすり抜けてしまうのを防ぐ。
        
    2. **プレイヤーの高速移動**: 特にプレイヤー自身がダッシュなどで速く動く場合、地形をすり抜けてしまうのを防ぐ。
        
- **CCDの種類**: ゲームエンジンによっては、CCDにもいくつかの種類があるよ。例えば、Unityでは**Continuous**（静的オブジェクトのみと衝突検出）、**Continuous Dynamic**（動的オブジェクトとも検出）、**Continuous Speculative**（予測的な検出）などがあり、**動的オブジェクトとの衝突が必要で、トンネリングが懸念される高速な弾丸**には、Continuous DynamicやSpeculativeといったCCDが設定されるんだ。
    

## ⚖️ CCDのトレードオフ

CCDは非常に正確だけど、その計算は**離散的衝突判定よりもCPU負荷が高い**というトレードオフがある。

- **CPU負荷**: 軌跡全体の衝突を計算するため、その分処理が重くなる。
    
- **採用基準**: そのため、ゲーム開発では、**「絶対にトンネリングさせてはいけない高速なオブジェクト」**（弾丸やプレイヤーなど）にだけCCDを設定し、その他の低速なオブジェクトや、大量に存在するオブジェクトにはパフォーマンスのために**離散的衝突判定**を使用するという、**ハイブリッドな戦略**が取られるのが一般的だよ。
    

君のようにRustでバックエンドAPIを組む知識があれば、ゲームロジックとしてこのCCDをC++などで実装する面白さもわかるだろうね！

Unityでの衝突判定の違いについて、こちらの動画でさらに詳しく見られるよ！  ![](https://www.youtube.com/watch?v=6h5FoPi3SY0)   
この動画では、Unityにおける離散的と連続的な衝突検出の違いを視覚的に解説しているよ。